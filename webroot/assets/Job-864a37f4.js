import{$ as P,a2 as U,a1 as A,a0 as E,r as p,c as G,a3 as n,a4 as c,aa as l,Z as J,t as e,a5 as s,ao as m,Q as h,a8 as _,a7 as V,ag as u,V as S,aH as z,ae as M,aG as Q,ab as r,a9 as d,a6 as B,ac as $,aj as Z,ak as q}from"./index-55751b84.js";import{a as L,V as v}from"./VDivider-9b0f9336.js";import{V as f}from"./VSkeletonLoader-9a6f69a0.js";const N=g=>(Z("data-v-4cac673c"),g=g(),q(),g),W={class:"main-wrapper"},X={class:"main-content"},Y={class:"carousel mt-2"},ee={id:"job-title"},ae={key:0,class:"job-info"},te={key:1,class:"job-info"},se={key:2,class:"job-info"},oe={key:3,class:"job-info"},le={key:4,class:"job-info"},ie={id:"job-description"},ne={style:{display:"flex",gap:"5px"}},re={class:"mt-2"},ce={key:1,class:"listing-deleted"},ue=N(()=>l("div",null," Listaus poistettu ",-1)),de=N(()=>l("div",{class:"carousel mt-2"},null,-1)),me={style:{display:"flex",gap:"5px","align-items":"center"}},_e={class:"mb-7"},pe={__name:"Job",setup(g){const D=U(),w=A(),o=E(),a=p({}),b=p(!0);p(null),p(null);const C=p(""),T=G(()=>a.value.user&&o.user&&a.value.user.hashed_id===o.user.id),x=p(0);o.displayedJob.id=D.params.id,o.fetchJob(o.displayedJob.id).then(i=>{let t=i.data;t.error||(a.value=t.job,C.value=t.job.user.first_name+" "+t.job.user.last_name,o.displayedJob.userId=t.job.user.hashed_id),b.value=!1});function I(){window.history.length>1?w.back():w.replace({path:"/jobs"})}function F(){w.replace({path:"/jobs"})}window.scrollTo(0,0);function R(){o.chat.jobId=o.displayedJob.id,o.chat.userId=o.displayedJob.userId,o.chatOpen=!0}function k(i=0,t=!1){return a.value.job_images&&a.value.job_images.length>0?o.url+"/job-image/"+a.value.job_images[i].name:o.url+"/no-img.png"}function ve(){}function H(){return console.log(a.value),a.value.contract_type===0?"Keikka työ":a.value.contract_type===1?"Vakituinen työsopimus":"Toistaiseksi voimassa oleva työsopimus"}function K(){let i=a.value;if(i.salary){let t="";return i.contract_type===0?i.salary_type===0?t="€/h":t="€":i.salary_type===0?t="€/h":t="€/kk",i.salary+" "+t}return"Sopimuksen mukaan"}function O(){if(window.confirm("Haluatko varmasti poistaa listauksen "+a.value.title+"?")){const t={job_id:a.value.hashed_id};o.deleteListing(t).then(y=>{a.value.is_deleted=!0})}}return(i,t)=>(n(),c("div",W,[l("div",X,[!a.value.is_deleted&&!b.value?(n(),c(J,{key:0},[e(m,null,{default:s(()=>[e(h,{flat:"",rounded:"",id:"back-btn",onClick:I},{default:s(()=>[e(u,{icon:"mdi-arrow-left"})]),_:1}),e(m,{id:"images-container"},{default:s(()=>[e(m,{class:"main-image-container"},{default:s(()=>[e(S,{src:k(x.value),"lazy-src":k(x.value,!0),contain:"",class:"job-image",id:"mainJobImage",onClick:t[0]||(t[0]=y=>void 0)},{placeholder:s(()=>[e(L,{class:"fill-height ma-0",align:"center",justify:"center"},{default:s(()=>[e(z,{indeterminate:"",color:"grey-lighten-5"})]),_:1})]),_:1},8,["src","lazy-src"])]),_:1}),l("div",Y,[(n(!0),c(J,null,M(a.value.job_images,(y,j)=>(n(),V(S,{key:j,src:k(j),"lazy-src":k(j,!0),cover:"",class:Q(["carousel-img",i.image===i.mainImage?"selected":""]),onClick:fe=>x.value=j,"aspect-ratio":"1"},{placeholder:s(()=>[e(L,{class:"fill-height ma-0",align:"center",justify:"center"},{default:s(()=>[e(z,{indeterminate:"",color:"grey-lighten-5"})]),_:1})]),_:2},1032,["src","lazy-src","onClick","class"]))),128))])]),_:1}),l("h1",ee,r(a.value.title),1),e(v),a.value?(n(),c("div",ae,[e(u,{icon:"mdi-briefcase"}),d(r(H()),1)])):_("",!0),a.value.area?(n(),c("div",te,[e(u,{icon:"mdi-map-marker"}),d(" "+r(a.value.area),1)])):_("",!0),a.value.date?(n(),c("div",se,[e(u,{icon:"mdi-calendar-range"}),d(" "+r(B(o).formatDate(a.value.date)),1)])):_("",!0),a.value.hours?(n(),c("div",oe,[e(u,{icon:"mdi-timer-outline"}),d(" "+r(a.value.hours)+"h "+r(a.value.contract_type===1||a.value.contract_type===2?"/ viikko":""),1)])):_("",!0),a.value.salary?(n(),c("div",le,[e(u,{icon:"mdi-cash"}),d(" "+r(K()),1)])):_("",!0),e(v,{class:"mt-5"}),l("p",ie,r(a.value.description),1)]),_:1}),e(v,{class:"mt-5 mb-5"}),l("div",null,[e(m,null,{default:s(()=>[e($,{class:"pa-5",elevation:"8"},{default:s(()=>[l("div",null,[l("div",ne,[e(u,{icon:"mdi-account"}),l("h3",null,r(C.value),1)]),l("div",re," Käyttäjä luotu "+r(B(o).formatDate(a.value.user.created_at)),1)]),T.value?(n(),V(h,{key:1,class:"mt-4",color:"red",onClick:t[2]||(t[2]=y=>O())},{default:s(()=>[d(" Poista listaus ")]),_:1})):(n(),V(h,{key:0,class:"mt-6",color:"primary",onClick:t[1]||(t[1]=y=>R())},{default:s(()=>[d(" Ota yhteyttä ")]),_:1}))]),_:1})]),_:1}),e(v,{class:"mt-5 mb-5"})])],64)):b.value?_("",!0):(n(),c("div",ce,[ue,e(h,{color:"primary",onClick:t[3]||(t[3]=y=>F())},{default:s(()=>[d(" Selaa töitä ")]),_:1})])),b.value?(n(),V(m,{key:2},{default:s(()=>[e(h,{flat:"",rounded:"",id:"back-btn",onClick:I},{default:s(()=>[e(u,{icon:"mdi-arrow-left"})]),_:1}),e(m,{id:"images-container"},{default:s(()=>[e(m,{class:"main-image-container"},{default:s(()=>[e(f,{style:{width:"100%",height:"100%"},class:"job-image"})]),_:1}),de]),_:1}),e(f,{type:"article"}),e(v,{class:"mt-5"}),e(f,{type:"list-item-three-line"}),e(v,{class:"mt-5 mb-5"}),e($,{class:"pa-5",elevation:"8"},{default:s(()=>[l("div",null,[l("div",me,[e(u,{icon:"mdi-account"}),e(f,{type:"text",width:"300px"})]),l("div",_e,[e(f,{type:"text",width:"300px",height:"20px",style:{"margin-top":"-10px"}})])]),e(f,{width:"200px",height:"40px",class:"mt-6"})]),_:1})]),_:1})):_("",!0)])]))}},be=P(pe,[["__scopeId","data-v-4cac673c"]]);export{be as default};
