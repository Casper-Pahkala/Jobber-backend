import{ac as j,ab as C,r as g,ae as o,af as n,az as a,ai as v,ag as i,aj as d,ak as h,t as c,P as I,X as x,aG as S,aE as w,ah as B,aF as u,a6 as H,aI as r,aA as M,aB as D}from"./index-624479a9.js";import{_ as E}from"./_plugin-vue_export-helper-c27b6911.js";import{V as N}from"./VContainer-40989895.js";import{V as $}from"./VCard-23dcc96c.js";import{a as A,V as F}from"./VImg-ac374819.js";const P=l=>(M("data-v-afc13674"),l=l(),D(),l),z={class:"main-wrapper"},J={class:"main-content"},R={class:"message-wrapper"},T={class:"message-info"},G={class:"name"},L={class:"job-title"},O={class:"latest-message"},U={class:"message"},X={key:0,class:"deleted"},q={key:0,class:"loading-container"},K=P(()=>a("span",{class:"loader"},null,-1)),Q=[K],W={key:1,class:"no-messages-text"},Y={__name:"Messages",setup(l){const p=j(),s=C(),_=g([]),m=g(!1);m.value=!0,s.user?s.getAllMessages().then(e=>{_.value=e.messages,m.value=!1}):(p.replace({path:"/"}),s.tab="",s.redirect={url:"messages",tab:"messages"},s.loginDialogShowing=!0);function b(e){s.currentJobId=e.job_hashed_id,s.currentChatUserId=e.other_user_id,s.chatOpen=!0}function y(e){return r(e).isSame(r(),"day")?"Tänään "+r(e).format("HH:mm"):r(e).isSame(r().clone().subtract(1,"days"),"day")?"Eilen "+r(e).format("HH:mm"):r(e).format("DD.MM HH:mm")}function V(){s.tab="jobs",p.push("/jobs")}return(e,f)=>(o(),n("div",z,[a("div",J,[_.value.length>0?(o(),v(N,{key:0},{default:i(()=>[(o(!0),n(x,null,S(_.value,(t,k)=>(o(),v($,{key:k,onClick:Z=>b(t),class:"message-container",elevation:"10"},{default:i(()=>[a("div",R,[c(F,{src:`${B(s).url}/job-image/${t.job_hashed_id}/image_0`,cover:"",class:"job-image"},{placeholder:i(()=>[c(A,{class:"fill-height ma-0",align:"center",justify:"center"},{default:i(()=>[c(w,{indeterminate:"",color:"grey-lighten-5"})]),_:1})]),_:2},1032,["src"]),a("div",T,[a("div",G,u(t.other_full_name),1),a("div",L,u(t.job_title??"Poistettu"),1),a("div",O,[a("div",U,u(t.message),1),c(H,{icon:"mdi-circle",size:"6"}),h(" "+u(y(t.time)),1)])])]),t.deleted?(o(),n("div",X)):d("",!0)]),_:2},1032,["onClick"]))),128)),m.value?(o(),n("div",q,Q)):d("",!0)]),_:1})):d("",!0),_.value.length==0?(o(),n("div",W,[h(" Ei viestejä "),c(I,{color:"primary",class:"text-none",onClick:f[0]||(f[0]=t=>V())},{default:i(()=>[h(" Etsi töitä ")]),_:1})])):d("",!0)])]))}},re=E(Y,[["__scopeId","data-v-afc13674"]]);export{re as default};
