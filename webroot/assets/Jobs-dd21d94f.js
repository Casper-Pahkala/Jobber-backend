import{p as Z,n as ee,L as ve,m as xe,bu as _e,q as me,t as a,bv as ge,bw as ke,bs as he,bx as Ce,c as N,r as d,s as we,O as Se,o as Pe,J as H,k as Fe,by as De,bz as oe,bA as je,bB as Ie,N as L,aa as E,W as ne,a8 as Re,bC as Te,bD as Be,aZ as He,an as W,bE as Me,b as Ue,I as Ae,ax as Ne,ay as Le,aI as Ee,aA as $,aB as ue,aQ as f,aC as n,aS as Oe,aW as $e,aD as se,aE as ie,aH as M,Q as U,aF as ze,aR as S,aG as Ge,aO as A,bF as Je,aX as Ye,aY as qe}from"./index-607c4400.js";import{_ as Ke}from"./_plugin-vue_export-helper-c27b6911.js";import{V as re}from"./VRow-edcf845b.js";import{d as Qe,e as We,b as de,a as P,V as Xe}from"./VForm-7bdf216c.js";import{a as X,d as ce,e as fe}from"./VCard-8fee9536.js";import{V as z}from"./VContainer-8f7a3a82.js";import"./VImg-139fd672.js";const Ze="/mowing.jpg";const et=Z({disabled:Boolean,modelValue:{type:Boolean,default:void 0},...Qe()},"VHover"),tt=ee()({name:"VHover",props:et(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:v}=i;const m=ve(e,"modelValue"),{runOpenDelay:s,runCloseDelay:r}=We(e,V=>!e.disabled&&(m.value=V));return()=>{var V;return(V=v.default)==null?void 0:V.call(v,{isHovering:m.value,props:{onMouseenter:s,onMouseleave:r}})}}});const at=Z({locale:String,fallbackLocale:String,messages:Object,rtl:{type:Boolean,default:void 0},...xe()},"VLocaleProvider"),lt=ee()({name:"VLocaleProvider",props:at(),setup(e,i){let{slots:v}=i;const{rtlClasses:m}=_e(e);return me(()=>{var s;return a("div",{class:["v-locale-provider",m.value,e.class],style:e.style},[(s=v.default)==null?void 0:s.call(v)])}),{}}});const ot=Z({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...ge(),...ke()},"VTextarea"),nt=ee()({name:"VTextarea",directives:{Intersect:he},inheritAttrs:!1,props:ot(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,i){let{attrs:v,emit:m,slots:s}=i;const r=ve(e,"modelValue"),{isFocused:V,focus:F,blur:G}=Ce(e),D=N(()=>typeof e.counterValue=="function"?e.counterValue(r.value):(r.value||"").toString().length),b=N(()=>{if(v.maxlength)return v.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function k(t,u){var l,c;!e.autofocus||!t||(c=(l=u[0].target)==null?void 0:l.focus)==null||c.call(l)}const p=d(),h=d(),j=we(""),y=d(),J=N(()=>e.persistentPlaceholder||V.value||e.active);function I(){var t;y.value!==document.activeElement&&((t=y.value)==null||t.focus()),V.value||F()}function R(t){I(),m("click:control",t)}function Y(t){m("mousedown:control",t)}function q(t){t.stopPropagation(),I(),W(()=>{r.value="",Me(e["onClick:clear"],t)})}function K(t){var l;const u=t.target;if(r.value=u.value,(l=e.modelModifiers)!=null&&l.trim){const c=[u.selectionStart,u.selectionEnd];W(()=>{u.selectionStart=c[0],u.selectionEnd=c[1]})}}const x=d(),C=d(+e.rows),T=N(()=>["plain","underlined"].includes(e.variant));Se(()=>{e.autoGrow||(C.value=+e.rows)});function _(){e.autoGrow&&W(()=>{if(!x.value||!h.value)return;const t=getComputedStyle(x.value),u=getComputedStyle(h.value.$el),l=parseFloat(t.getPropertyValue("--v-field-padding-top"))+parseFloat(t.getPropertyValue("--v-input-padding-top"))+parseFloat(t.getPropertyValue("--v-field-padding-bottom")),c=x.value.scrollHeight,w=parseFloat(t.lineHeight),O=Math.max(parseFloat(e.rows)*w+l,parseFloat(u.getPropertyValue("--v-input-control-height"))),Q=parseFloat(e.maxRows)*w+l||1/0,g=Ae(c??0,O,Q);C.value=Math.floor((g-l)/w),j.value=Ue(g)})}Pe(_),H(r,_),H(()=>e.rows,_),H(()=>e.maxRows,_),H(()=>e.density,_);let o;return H(x,t=>{t?(o=new ResizeObserver(_),o.observe(x.value)):o==null||o.disconnect()}),Fe(()=>{o==null||o.disconnect()}),me(()=>{const t=!!(s.counter||e.counter||e.counterValue),u=!!(t||s.details),[l,c]=De(v),[{modelValue:w,...O}]=oe.filterProps(e),[Q]=je(e);return a(oe,L({ref:p,modelValue:r.value,"onUpdate:modelValue":g=>r.value=g,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-text-field--plain-underlined":T.value},e.class],style:e.style},l,O,{centerAffix:C.value===1&&!T.value,focused:V.value}),{...s,default:g=>{let{isDisabled:B,isDirty:te,isReadonly:Ve,isValid:be}=g;return a(Ie,L({ref:h,style:{"--v-textarea-control-height":j.value},onClick:R,onMousedown:Y,"onClick:clear":q,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},Q,{active:J.value||te.value,centerAffix:C.value===1&&!T.value,dirty:te.value||e.dirty,disabled:B.value,focused:V.value,error:be.value===!1}),{...s,default:pe=>{let{props:{class:ae,...le}}=pe;return a(E,null,[e.prefix&&a("span",{class:"v-text-field__prefix"},[e.prefix]),ne(a("textarea",L({ref:y,class:ae,value:r.value,onInput:K,autofocus:e.autofocus,readonly:Ve.value,disabled:B.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:I,onBlur:G},le,c),null),[[Re("intersect"),{handler:k},null,{once:!0}]]),e.autoGrow&&ne(a("textarea",{class:[ae,"v-textarea__sizer"],id:`${le.id}-sizer`,"onUpdate:modelValue":ye=>r.value=ye,ref:x,readonly:!0,"aria-hidden":"true"},null),[[Te,r.value]]),e.suffix&&a("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:u?g=>{var B;return a(E,null,[(B=s.details)==null?void 0:B.call(s,g),t&&a(E,null,[a("span",null,null),a(Be,{active:e.persistentCounter||V.value,value:D.value,max:b.value},s.counter)])])}:void 0})}),He({},p,h,y)}}),ut=e=>(Ye("data-v-c66cb838"),e=e(),qe(),e),st={class:"top-layout"},it={id:"jobs-container"},rt=ut(()=>f("img",{class:"job-image",src:Ze},null,-1)),dt={class:"job-content"},ct={class:"job-main"},ft={class:"job-title"},vt={class:"job-description"},mt={class:"job-info"},Vt={class:"job-info-item"},bt={class:"job-info-item"},pt={class:"job-info-item"},yt={class:"job-info-item"},xt={class:"text-center"},_t={__name:"Jobs",setup(e){const i=Ne(),v=Le(),m=d(!1),s=d(!1),r=d(null),V=N(()=>r.value?$e(r.value).format("DD.MM.YYYY"):null),F=d(null),G=d(new Date().toISOString().substr(0,10)),D=d(null),b=d(null),k=d(null),p=d(null),h=d([]),j=d(null),y=d(null),J=[o=>o?!0:"Syötä otsikko"],I=[o=>o?!0:"Syötä päivämäärä"],R=[o=>{let t="Syötä arvo",u=!1;return o&&(u=!0),parseFloat(o)||(u=!1),parseFloat(o)<=0&&(t="Arvo ei saa olla 0"),u?!0:t}],Y=[o=>{let t="Kuvauksen täytyy olla vähintään 20 merkkiä",u=!1;return o&&(u=!0),o&&o.length<20&&(u=!1),u?!0:t}];i.fetchJobs().then(o=>{let t=o.data;t.error||(h.value=t.jobs)});function q(){j.value.validate().then(o=>{if(o.valid){const t={title:D.value,date:r.value,duration:b.value,full_salary:p.value,description:y.value};i.loading=!0,i.addJob(t).then(u=>{let l=u.data;i.loading=!1,l.status==="success"?(m.value=!1,i.snackbarText="Työ lisätty onnistuneesti",i.snackbarColor="green-darken-2",i.snackbar=!0):(i.snackbarText="Työn lisäyksessä tapahtui virhe",i.snackbarColor="red-darken-2",i.snackbar=!0)})}})}function K(){s.value=!1,r.value=F.value}function x(o){b.value&&(p.value=o*b.value)}function C(o){b.value&&(k.value=o/b.value)}function T(o){k.value&&(p.value=o*k.value)}function _(o){v.push("/jobs/"+o.hashed_id)}return(o,t)=>{const u=Ee("v-date-picker");return $(),ue(E,null,[f("div",null,[f("div",st,[a(re,{class:"fill-height top-wrapper",align:"center",justify:"center"},{default:n(()=>[a(P,{cols:"8"}),a(P,{cols:"4"},{default:n(()=>[se(i).user?($(),ie(U,{key:0,color:"primary",onClick:t[0]||(t[0]=l=>m.value=!0),class:"col-4 add-button"},{default:n(()=>[M(" Lisää työ ")]),_:1})):ze("",!0)]),_:1})]),_:1})]),f("div",it,[($(!0),ue(E,null,Oe(h.value,l=>($(),ie(tt,{key:l.id},{default:n(({isHovering:c,props:w})=>[a(X,L({onClick:O=>_(l),class:"job",elevation:c?8:4},w),{default:n(()=>[rt,f("div",dt,[f("div",ct,[f("div",ft,S(l.title),1),f("div",vt,S(l.description),1)]),f("div",mt,[f("div",Vt,S(se(i).formatDate(l.date)),1),f("div",bt,S(l.distance),1),f("div",pt,S(l.estimated_time)+"h",1),f("div",yt,S(l.full_salary)+"€",1)])])]),_:2},1040,["onClick","elevation"])]),_:2},1024))),128))])]),f("div",xt,[a(de,{modelValue:m.value,"onUpdate:modelValue":t[12]||(t[12]=l=>m.value=l),width:"600px",class:""},{default:n(()=>[a(X,null,{default:n(()=>[a(ce,null,{default:n(()=>[a(Xe,{onSubmit:Ge(q,["prevent"]),ref_key:"jobForm",ref:j},{default:n(()=>[a(z,null,{default:n(()=>[a(A,{modelValue:D.value,"onUpdate:modelValue":t[1]||(t[1]=l=>D.value=l),label:"Työn otsikko",rules:J,required:""},null,8,["modelValue"])]),_:1}),a(z,null,{default:n(()=>[a(de,{modelValue:s.value,"onUpdate:modelValue":t[6]||(t[6]=l=>s.value=l),"max-width":"400"},{activator:n(({on:l})=>[a(A,L({modelValue:V.value,"onUpdate:modelValue":t[2]||(t[2]=c=>V.value=c),label:"Päivä",readonly:""},Je(l),{"onUpdate:focused":t[3]||(t[3]=c=>s.value=!0),rules:I,required:""}),null,16,["modelValue"])]),default:n(()=>[a(X,null,{default:n(()=>[a(ce,null,{default:n(()=>[a(lt,{locale:"fi"},{default:n(()=>[a(u,{modelValue:F.value,"onUpdate:modelValue":t[4]||(t[4]=l=>F.value=l),"hide-actions":"",min:G.value,title:"Valitse päivämäärä"},null,8,["modelValue","min"])]),_:1})]),_:1}),a(fe,{style:{direction:"rtl"}},{default:n(()=>[a(U,{flat:"",onClick:K},{default:n(()=>[M("OK")]),_:1}),a(U,{flat:"",onClick:t[5]||(t[5]=l=>s.value=!1)},{default:n(()=>[M("Peruuta")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(z,null,{default:n(()=>[a(re,null,{default:n(()=>[a(P,{cols:"4"},{default:n(()=>[a(A,{label:"kesto",suffix:"h",type:"number",modelValue:b.value,"onUpdate:modelValue":[t[7]||(t[7]=l=>b.value=l),T],min:"0",rules:R},null,8,["modelValue"])]),_:1}),a(P,{cols:"4"},{default:n(()=>[a(A,{label:"Tuntipalkka",suffix:"€",type:"number","onUpdate:modelValue":[x,t[8]||(t[8]=l=>k.value=l)],modelValue:k.value,min:"0",rules:R},null,8,["modelValue"])]),_:1}),a(P,{cols:"4"},{default:n(()=>[a(A,{label:"Kokonaispalkka",suffix:"€",type:"number","onUpdate:modelValue":[C,t[9]||(t[9]=l=>p.value=l)],modelValue:p.value,min:"0",rules:R},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(z,null,{default:n(()=>[a(nt,{label:"Kuvaus",rules:Y,required:"",modelValue:y.value,"onUpdate:modelValue":t[10]||(t[10]=l=>y.value=l)},null,8,["modelValue"])]),_:1}),a(fe,null,{default:n(()=>[a(P,{class:"text-right"},{default:n(()=>[a(U,{onClick:t[11]||(t[11]=l=>m.value=!1)},{default:n(()=>[M("Peruuta")]),_:1}),a(U,{color:"primary",type:"submit"},{default:n(()=>[M("Valmis")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])],64)}}},Ft=Ke(_t,[["__scopeId","data-v-c66cb838"]]);export{Ft as default};
