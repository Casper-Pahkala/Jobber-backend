import{a8 as A,ab as H,aa as M,a9 as P,r as y,c as z,ad as l,ae as r,ak as o,t as e,af as i,Y as Q,Q as v,ai as u,ah as b,ax as g,a5 as m,V as L,ag as c,Z as N,aq as T,an as Y,am as d,aj as p,ao as $,at as Z,au as G}from"./index-20ee4be3.js";import{V as h}from"./VSkeletonLoader-65b70792.js";import{V as k}from"./VDivider-92e465e5.js";const V=x=>(Z("data-v-4bc90580"),x=x(),G(),x),W={class:"main-wrapper"},X={class:"main-content"},ee={class:"images-container"},te={class:"carousel mt-2"},ae={id:"job-title"},se={key:0,class:"job-info"},le={key:1,class:"job-info"},oe={class:"area-container"},ie={key:2,class:"job-info"},ne={key:3,class:"job-info"},re={key:4,class:"job-info"},ce=V(()=>o("h4",{class:"mt-3"},"Kuvaus",-1)),ue={id:"job-description",class:"mt-2"},de={style:{display:"flex",gap:"5px"}},me={class:"mt-2"},_e={key:0,class:"listing-deleted"},he=V(()=>o("div",null," Listaus poistettu ",-1)),ve=V(()=>o("div",{class:"carousel mt-2"},null,-1)),pe={style:{display:"flex",gap:"5px","align-items":"center"}},fe={class:"mb-7"},ye={__name:"Job",setup(x){const D=H(),C=M(),a=P(),t=y({}),j=y(!0);y(null),y(null);const J=y(""),E=z(()=>t.value.user&&a.user&&t.value.user.hashed_id===a.user.id),F=z(()=>(console.log(a.fullscreen,"ss"),a.fullscreen)),I=y(0);a.displayedJob.id=D.params.id,a.fetchJob(a.displayedJob.id).then(n=>{setTimeout(()=>{let s=n.data;s.error||(s.job.area=JSON.parse(s.job.area),t.value=s.job,J.value=s.job.user.first_name+" "+s.job.user.last_name,a.displayedJob.userId=s.job.user.hashed_id),j.value=!1},0)});function S(){window.history.length>1?C.back():C.replace({path:"/jobs"})}function K(){C.replace({path:"/jobs"})}window.scrollTo(0,0);function O(){a.chat.jobId=a.displayedJob.id,a.chat.userId=a.displayedJob.userId,a.chatOpen=!0}function w(n=0,s=!1){return t.value.job_images&&t.value.job_images.length>0?a.url+"/job-image/"+t.value.job_images[n].name+".jpg":a.url+"/no-img.png"}function B(){a.toggleFullscreen(document.getElementById("mainImageContainer"))}function R(){return console.log(t.value),t.value.contract_type===0?"Keikka työ":t.value.contract_type===1?"Vakituinen työsopimus":"Toistaiseksi voimassa oleva työsopimus"}function U(){let n=t.value;if(n.salary){let s="";return n.contract_type===0?n.salary_type===0?s="€/h":s="€":n.salary_type===0?s="€/h":s="€/kk",n.salary+" "+s}return"Sopimuksen mukaan"}function q(){if(window.confirm("Haluatko varmasti poistaa listauksen "+t.value.title+"?")){const s={job_id:t.value.hashed_id};a.deleteListing(s).then(_=>{t.value.is_deleted=!0})}}return document.addEventListener("fullscreenchange",()=>{document.fullscreenElement||(a.fullscreen=!1)}),(n,s)=>(l(),r("div",W,[o("div",X,[e(Q,{name:"fade"},{default:i(()=>[!t.value.is_deleted&&!j.value?(l(),r("div",{key:j.value},[e(g,null,{default:i(()=>[e(v,{flat:"",rounded:"",id:"back-btn",onClick:S},{default:i(()=>[e(m,{icon:"mdi-arrow-left"})]),_:1}),o("div",ee,[e(g,{class:"main-image-container",id:"mainImageContainer"},{default:i(()=>[e(L,{src:w(I.value),"lazy-src":w(I.value,!0),contain:"",class:"job-image",id:"mainJobImage"},{placeholder:i(()=>[e(h,{type:"image",theme:c(a).theme,height:"100%"},null,8,["theme"])]),_:1},8,["src","lazy-src"]),t.value.job_images.length>0?(l(),b(v,{key:0,class:"fullscreen-btn",flat:"",icon:"mdi-fullscreen",elevation:"10",onClick:s[0]||(s[0]=_=>B())})):u("",!0),F.value?(l(),b(v,{key:1,class:"close-btn",flat:"",icon:"mdi-close",elevation:"8",onClick:s[1]||(s[1]=_=>B())})):u("",!0)]),_:1}),o("div",te,[(l(!0),r(N,null,T(t.value.job_images,(_,f)=>(l(),b(L,{key:f,src:w(f),"lazy-src":w(f,!0),cover:"",class:Y(["carousel-img",n.image===n.mainImage?"selected":""]),onClick:be=>I.value=f,"aspect-ratio":"1"},{placeholder:i(()=>[e(h,{type:"image",round:"",theme:c(a).theme},null,8,["theme"])]),_:2},1032,["src","lazy-src","onClick","class"]))),128))])]),o("h1",ae,d(t.value.title),1),e(k),t.value?(l(),r("div",se,[e(m,{icon:"mdi-briefcase"}),p(d(R()),1)])):u("",!0),t.value.area?(l(),r("div",le,[e(m,{icon:"mdi-map-marker"}),o("div",oe,[(l(!0),r(N,null,T(t.value.area,(_,f)=>(l(),r("div",{key:f,class:"area-chip"},d(_),1))),128))])])):u("",!0),t.value.date?(l(),r("div",ie,[e(m,{icon:"mdi-calendar-range"}),p(" "+d(c(a).formatDate(t.value.date)),1)])):u("",!0),t.value.hours?(l(),r("div",ne,[e(m,{icon:"mdi-timer-outline"}),p(" "+d(t.value.hours)+"h "+d(t.value.contract_type===1||t.value.contract_type===2?"/ viikko":""),1)])):u("",!0),t.value.salary?(l(),r("div",re,[e(m,{icon:"mdi-cash"}),p(" "+d(U()),1)])):u("",!0),e(k,{class:"mt-5"}),ce,o("p",ue,d(t.value.description),1)]),_:1}),e(k,{class:"mt-5 mb-5"}),o("div",null,[e(g,null,{default:i(()=>[e($,{class:"user-card pa-5",elevation:"8"},{default:i(()=>[o("div",null,[o("div",de,[e(m,{icon:"mdi-account"}),o("h3",null,d(J.value),1)]),o("div",me," Käyttäjä luotu "+d(c(a).formatDate(t.value.user.created_at)),1)]),E.value?(l(),b(v,{key:1,class:"mt-4",color:"red",style:{color:"white"},onClick:s[3]||(s[3]=_=>q())},{default:i(()=>[p(" Poista listaus ")]),_:1})):(l(),b(v,{key:0,class:"mt-6",color:"primary",onClick:s[2]||(s[2]=_=>O())},{default:i(()=>[p(" Ota yhteyttä ")]),_:1}))]),_:1})]),_:1}),e(k,{class:"mt-5 mb-5"})])])):u("",!0)]),_:1}),!j.value&&t.value.is_deleted?(l(),r("div",_e,[he,e(v,{color:"primary",onClick:s[4]||(s[4]=_=>K())},{default:i(()=>[p(" Selaa töitä ")]),_:1})])):u("",!0),j.value?(l(),b(g,{key:1},{default:i(()=>[e(v,{flat:"",rounded:"",id:"back-btn",onClick:S},{default:i(()=>[e(m,{icon:"mdi-arrow-left"})]),_:1}),e(g,{class:"images-container"},{default:i(()=>[e(g,{class:"main-image-container"},{default:i(()=>[e(h,{style:{width:"100%",height:"100%"},class:"job-image",theme:c(a).theme},null,8,["theme"])]),_:1}),ve]),_:1}),e(h,{type:"article",theme:c(a).theme},null,8,["theme"]),e(k,{class:"mt-5"}),e(h,{type:"list-item-three-line",theme:c(a).theme},null,8,["theme"]),e(k,{class:"mt-5 mb-5"}),e($,{class:"pa-5",elevation:"8",theme:c(a).theme},{default:i(()=>[o("div",null,[o("div",pe,[e(m,{icon:"mdi-account"}),e(h,{type:"text",width:"300px",theme:c(a).theme},null,8,["theme"])]),o("div",fe,[e(h,{type:"text",width:"300px",height:"20px",style:{"margin-top":"-10px"},theme:c(a).theme},null,8,["theme"])])]),e(h,{width:"200px",height:"40px",class:"mt-6",theme:c(a).theme},null,8,["theme"])]),_:1},8,["theme"])]),_:1})):u("",!0)])]))}},xe=A(ye,[["__scopeId","data-v-4bc90580"]]);export{xe as default};
