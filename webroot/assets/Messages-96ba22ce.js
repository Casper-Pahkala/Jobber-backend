import{ac as w,ab as x,r as v,ae as a,af as n,an as o,ai as f,ag as r,aj as c,ah as p,ak as d,t as l,P as k,X as I,ao as S,aG as D,ap as g,a6 as H,aI as i,aC as M,aD as B}from"./index-c33e5e7d.js";import{_ as $,a as E,V as N}from"./_plugin-vue_export-helper-b629449e.js";import{V as P}from"./VContainer-dc1123d3.js";import{V as T}from"./VCard-bafe837c.js";const z=_=>(M("data-v-21892d63"),_=_(),B(),_),A={class:"main-wrapper"},F={class:"main-content"},J={class:"message-wrapper"},K={class:"message-info"},R={class:"name"},G={class:"job-title"},L={class:"latest-message"},O={class:"message"},U={key:0,class:"deleted"},X={key:0,class:"loading-container"},q=z(()=>o("span",{class:"loader"},null,-1)),Q=[q],W={key:1,class:"no-messages-text"},Y={key:2,class:"no-messages-text"},Z={__name:"Messages",setup(_){window.scrollTo(0,0);const y=w(),e=x(),u=v([]),m=v(!1);m.value=!0,e.user?e.getAllMessages().then(s=>{u.value=s.messages,m.value=!1}):e.loginDialogShowing=!0;function V(s){e.currentJobId=s.job_hashed_id,e.currentChatUserId=s.other_user_id,e.chatOpen=!0}function b(s){return i(s).isSame(i(),"day")?"Tänään "+i(s).format("HH:mm"):i(s).isSame(i().clone().subtract(1,"days"),"day")?"Eilen "+i(s).format("HH:mm"):i(s).format("DD.MM HH:mm")}function j(){e.tab="jobs",y.push("/jobs")}return(s,h)=>(a(),n("div",A,[o("div",F,[u.value.length>0?(a(),f(P,{key:0},{default:r(()=>[(a(!0),n(I,null,S(u.value,(t,C)=>(a(),f(T,{key:C,onClick:ee=>V(t),class:"message-container",elevation:"10"},{default:r(()=>[o("div",J,[l(N,{src:`${p(e).url}/job-image/${t.job_hashed_id}/image_0`,cover:"",class:"job-image"},{placeholder:r(()=>[l(E,{class:"fill-height ma-0",align:"center",justify:"center"},{default:r(()=>[l(D,{indeterminate:"",color:"grey-lighten-5"})]),_:1})]),_:2},1032,["src"]),o("div",K,[o("div",R,g(t.other_full_name),1),o("div",G,g(t.job_title??"Poistettu"),1),o("div",L,[o("div",O,g(t.message),1),l(H,{icon:"mdi-circle",size:"6"}),d(" "+g(b(t.time)),1)])])]),t.deleted?(a(),n("div",U)):c("",!0)]),_:2},1032,["onClick"]))),128)),m.value?(a(),n("div",X,Q)):c("",!0)]),_:1})):c("",!0),u.value.length==0&&p(e).user&&!m.value?(a(),n("div",W,[d(" Ei viestejä "),l(k,{color:"primary",class:"text-none",onClick:h[0]||(h[0]=t=>j())},{default:r(()=>[d(" Etsi töitä ")]),_:1})])):c("",!0),p(e).user?c("",!0):(a(),n("div",Y,[d(" Kirjaudu sisään niin pääset näkemään viestisi "),l(k,{class:"mt-7",size:"large",color:"primary",onClick:h[1]||(h[1]=t=>p(e).loginDialogShowing=!0)},{default:r(()=>[d(" Kirjaudu ")]),_:1})]))])]))}},ie=$(Z,[["__scopeId","data-v-21892d63"]]);export{ie as default};
