import{ac as C,ab as b,c as w,r as x,ae as t,af as n,al as a,ai as v,ag as r,aj as c,ah as d,ak as u,t as l,P as h,X as S,an as I,aG as M,am as g,a6 as D,aI as o,ap as H,aq as B}from"./index-3b31550a.js";import{_ as $,a as E,V as N}from"./_plugin-vue_export-helper-b6f1a44b.js";import{V as P}from"./VContainer-5ad096d1.js";import{V as T}from"./VCard-28e5a739.js";const z=_=>(H("data-v-15e18822"),_=_(),B(),_),A={class:"main-wrapper"},F={class:"main-content"},K={class:"message-wrapper"},R={class:"message-info"},q={class:"name"},G={class:"job-title"},J={class:"latest-message"},L={class:"message"},X={key:0,class:"deleted"},O={key:0,class:"loading-container"},Q=z(()=>a("span",{class:"loader"},null,-1)),U=[Q],W={key:1,class:"no-messages-text"},Y={key:2,class:"no-messages-text"},Z={__name:"Messages",setup(_){window.scrollTo(0,0);const k=C(),e=b(),f=w(()=>e.latestMessages),m=x(!1);m.value=!0,e.user?e.getAllMessages().then(()=>{m.value=!1}):e.loginDialogShowing=!0;function y(i){return o(i).isSame(o(),"day")?"Tänään "+o(i).format("HH:mm"):o(i).isSame(o().clone().subtract(1,"days"),"day")?"Eilen "+o(i).format("HH:mm"):o(i).format("DD.MM HH:mm")}function V(){e.tab="jobs",k.push("/jobs")}return(i,p)=>(t(),n("div",A,[a("div",F,[f.value.length>0?(t(),v(P,{key:0},{default:r(()=>[(t(!0),n(S,null,I(f.value,(s,j)=>(t(),v(T,{key:j,onClick:ee=>d(e).openChat(s),class:"message-container",elevation:"4"},{default:r(()=>[a("div",K,[l(N,{src:`${d(e).url}/profile-image/${s.other_user_id}.jpg`,cover:"",class:"job-image"},{placeholder:r(()=>[l(E,{class:"fill-height ma-0",align:"center",justify:"center"},{default:r(()=>[l(M,{indeterminate:"",color:"grey-lighten-5"})]),_:1})]),_:2},1032,["src"]),a("div",R,[a("div",q,g(s.other_full_name),1),a("div",G,g(s.job_title??"Poistettu"),1),a("div",J,[a("div",L,g(s.message),1),l(D,{icon:"mdi-circle",size:"6"}),u(" "+g(y(s.time)),1)])])]),s.deleted?(t(),n("div",X)):c("",!0)]),_:2},1032,["onClick"]))),128)),m.value?(t(),n("div",O,U)):c("",!0)]),_:1})):c("",!0),f.value.length==0&&d(e).user&&!m.value?(t(),n("div",W,[u(" Ei viestejä "),l(h,{color:"primary",class:"text-none",onClick:p[0]||(p[0]=s=>V())},{default:r(()=>[u(" Etsi töitä ")]),_:1})])):c("",!0),d(e).user?c("",!0):(t(),n("div",Y,[u(" Kirjaudu sisään niin pääset näkemään viestisi "),l(h,{class:"mt-7",size:"large",color:"primary",onClick:p[1]||(p[1]=s=>d(e).loginDialogShowing=!0)},{default:r(()=>[u(" Kirjaudu ")]),_:1})]))])]))}},ie=$(Z,[["__scopeId","data-v-15e18822"]]);export{ie as default};
