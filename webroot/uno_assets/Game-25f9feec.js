import{n as z,A as E,J as F,K as j,r as W,c as v,B as r,L as k,Q as d,O as c,D as u,N as y,M as D,R as w,l as n,w as s,V as m,P as h,E as V,C as $,t}from"./index-4a10a9bb.js";import{_ as q}from"./_plugin-vue_export-helper-c27b6911.js";const L="/wild.jpg",S="/wild_4.png",T={key:0,class:"game"},U={class:"player-turn"},Y={key:0,style:{color:"#388E3C","font-weight":"600","font-size":"50px"}},H={class:"mid"},J=["src"],K=["src"],M={class:"my-cards"},O={class:"my-cards-wrapper"},Q=["onClick"],X={key:0,class:"wild",src:L},Z={key:1,class:"wild",src:S},ee={style:{"text-align":"center"}},le=z({__name:"Game",setup(ae){const e=E(),C=F(),N=j();if(!e.lobby){const l=Array.isArray(C.query.code)?C.query.code[0]:C.query.code;l?e.joinLobby(parseInt(l)):N.push({name:"Home"})}const f=W(!1),_=W(null),i=v(()=>!e.lobby||!e.lobby.game?null:e.lobby.game.currentDeck[e.lobby.game.currentDeck.length-1]),x=v(()=>!e.lobby||!e.lobby.game?!1:e.lobby.game.gameWon!==null),P=v(()=>{if(!e.lobby)return null;const l=e.lobby.game.players.find(o=>o.id===e.player.id);return console.log(e.lobby.game.players,e.player.id),l?l.cards:[]}),b=v(()=>{if(!e.lobby)return null;const l=e.lobby.game.players[e.lobby.game.currentPlayerIndex];return l||null}),p=v(()=>e.lobby?e.lobby.game.currentPlayerIndex===e.lobby.game.players.findIndex(l=>l.id===e.player.id)&&!e.turnFinished:null);function B(l){p.value&&I(l)&&(l.color==="wild"?(f.value=!0,_.value=l):e.playCard(l))}function I(l){return i.value.color===l.color||i.value.value===l.value||l.color==="wild"}function A(){p.value&&e.drawCard()}function g(l){console.log("Selected color:",l),f.value=!1,_.value&&(_.value.color=l),e.playCard(_.value)}function G(){let l=e.lobby.game.gameWon;return e.lobby.game.players.find(o=>o.id===l).name}return(l,o)=>(t(),r(c,null,[k(e).lobby?(t(),r("div",T,[d("div",U,[p.value?(t(),r("span",Y," Your turn ")):b.value?(t(),r(c,{key:1},[u(y(b.value.name)+"'s Turn ",1)],64)):D("",!0)]),d("div",H,[d("div",{class:w("card "+i.value.color)},[i.value.value==="Wild"?(t(),r("img",{key:0,class:"wild",src:`/wild_${i.value.color}.jpg`},null,8,J)):i.value.value==="Wild Draw Four"?(t(),r("img",{key:1,class:"wild",src:`/wild_4_${i.value.color}.png`},null,8,K)):(t(),r(c,{key:2},[u(y(i.value.value),1)],64))],2),n(m,{onClick:A,class:"draw-card-btn",color:"primary",size:"large",disabled:!p.value},{default:s(()=>[u(" Draw card ")]),_:1},8,["disabled"])]),d("div",M,[d("div",O,[(t(!0),r(c,null,h(P.value,(a,R)=>(t(),r("div",{key:R,class:w("card "+a.color+(p.value?" myturn":"")),onClick:oe=>B(a)},[a.value==="Wild"?(t(),r("img",X)):a.value==="Wild Draw Four"?(t(),r("img",Z)):(t(),r(c,{key:2},[u(y(a.value),1)],64))],10,Q))),128))])]),n(V,{class:"players pa-10",elevation:"8"},{default:s(()=>[(t(!0),r(c,null,h(k(e).lobby.game.players,a=>(t(),r("div",{key:a.id,class:w(["player",{turn:b.value&&b.value.id===a.id}])},[d("span",null,y(a.name),1),d("span",null,y(" ("+a.cards.length+")"),1)],2))),128))]),_:1})])):D("",!0),n($,{modelValue:f.value,"onUpdate:modelValue":o[4]||(o[4]=a=>f.value=a),persistent:"",width:"400px"},{default:s(()=>[n(V,null,{default:s(()=>[n(m,{onClick:o[0]||(o[0]=a=>g("blue"))},{default:s(()=>[u(" Blue ")]),_:1}),n(m,{onClick:o[1]||(o[1]=a=>g("red"))},{default:s(()=>[u(" Red ")]),_:1}),n(m,{onClick:o[2]||(o[2]=a=>g("yellow"))},{default:s(()=>[u(" Yellow ")]),_:1}),n(m,{onClick:o[3]||(o[3]=a=>g("green"))},{default:s(()=>[u(" Green ")]),_:1})]),_:1})]),_:1},8,["modelValue"]),n($,{modelValue:x.value,"onUpdate:modelValue":o[6]||(o[6]=a=>x.value=a),persistent:"",width:"600px"},{default:s(()=>[n(V,{class:"pt-5 pl-10 pr-10 pb-5"},{default:s(()=>[d("h1",ee," WINNER: "+y(G()),1),n(m,{color:"primary",size:"large",class:"mt-10",onClick:o[5]||(o[5]=a=>k(e).playAgain())},{default:s(()=>[u(" Play again ")]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}});const ne=q(le,[["__scopeId","data-v-91cd9075"]]);export{ne as default};
